================================================================================
║                   PATIENT DATA PIPELINE - PROCESSING STARTED                   ║
================================================================================
[22:04:13] ℹ️  Processing CSV file: hawthorn.csv
================================================================================
║                          PROCESSING DOCUMENT 9314061                           ║
================================================================================
[22:04:13] [DOC: 9314061] ℹ️  Facility/Agency: Southcoast VNA – Community Office (Fairhaven) | Received Date: 
[22:04:13] [DOC: 9314061] ⚠️  Agency 'Southcoast VNA – Community Office (Fairhaven)' not found in company mapping
[22:04:13] [DOC: 9314061] 📋 [1/6] Extracting text from PDF
[22:04:15] ℹ️  Document is text-based - using pdfplumber for extraction
[22:04:15] [DOC: 9314061] ✅ Text extracted successfully using pdfplumber
[22:04:15] [DOC: 9314061] ℹ️  Text extraction completed using pdfplumber: 1307 characters
[22:04:15] [DOC: 9314061] ✅ Text extraction completed
[22:04:15] [DOC: 9314061] 📄 NON-FAXED DOCUMENT | Type: ORDER
[22:04:15] [DOC: 9314061] 📊 Document Information
     └─ Faxed: No
     └─ Fax Source: Unknown
     └─ Document Type: ORDER
     └─ Extraction Method: pdfplumber
     └─ Text Length: 1307
[22:04:15] [DOC: 9314061] 📋 [2/6] Extracting patient data using AI
[22:04:19] ✅ AI patient data extraction completed successfully
[22:04:19] [DOC: 9314061] 📊 AI-Extracted Patient Data
     └─ patientFName: Joao
     └─ patientLName: Aguiar
     └─ dob: 08/11/1954
     └─ patientSex: Male
     └─ medicalRecordNo: 2170342
     └─ billingProvider: Gloriane Afonso-Fede, MD
     └─ physicianNPI: 
     └─ nameOfAgency: Southcoast Visiting Nurse Association Inc.
     └─ patientAddress: None
     └─ patientCity: None
     └─ patientState: MA
     └─ zip: 02719-5252
     └─ episodeDiagnoses: [{'startOfCare': None, 'startOfEpisode': None, 'endOfEpisode': None, 'firstDiagnosis': None, 'secondDiagnosis': None, 'thirdDiagnosis': None, 'fourthDiagnosis': None, 'fifthDiagnosis': None, 'sixthDiagnosis': None}]
[22:04:19] [DOC: 9314061] 📋 [3/6] Processing and validating dates
[22:04:19] [DOC: 9314061] 📊 Raw Episode Dates from Document
     └─ Start of Care: Not found
     └─ Start of Episode: Not found
     └─ End of Episode: Not found
[22:04:19] [DOC: 9314061] 📊 Patient Data After Date Processing
     └─ patientFName: Joao
     └─ patientLName: Aguiar
     └─ dob: 08/11/1954
     └─ patientSex: Male
     └─ medicalRecordNo: 2170342
     └─ billingProvider: Gloriane Afonso-Fede, MD
     └─ physicianNPI: 
     └─ nameOfAgency: Southcoast Visiting Nurse Association Inc.
     └─ patientAddress: None
     └─ patientCity: None
     └─ patientState: MA
     └─ zip: 02719-5252
     └─ episodeDiagnoses: [{'startOfCare': None, 'startOfEpisode': None, 'endOfEpisode': None, 'firstDiagnosis': None, 'secondDiagnosis': None, 'thirdDiagnosis': None, 'fourthDiagnosis': None, 'fifthDiagnosis': None, 'sixthDiagnosis': None}]
[22:04:19] [DOC: 9314061] 📋 [4/6] Creating or finding patient
[22:04:19] [DOC: 9314061] ⚠️  No agency mapping for 'Southcoast VNA – Community Office (Fairhaven)', using fallback approach
[22:04:19] [DOC: 9314061] ℹ️  Using fallback agency ID: e59b6bf5-1fe9-4d61-9ee0-54041e21e123
[22:04:19] 📊 Patient Data for Processing
     └─ First Name: Joao
     └─ Last Name: Aguiar
     └─ DOB: 08/11/1954
     └─ MRN: 2170342
     └─ Address: None
     └─ City: None
     └─ State: MA
     └─ ZIP: 02719-5252
[22:04:19] ❌ Agency 'Southcoast VNA – Community Office (Fairhaven)' not found in company mapping
[22:04:19] [DOC: 9314061] ❌ Patient processing completely failed
[22:04:19] [DOC: 9314061] 📋 [5/6] Extracting order data
[22:04:21] ✅ AI order data extraction completed successfully
[22:04:21] [DOC: 9314061] 📊 AI-Extracted Order Data
     └─ orderNo: 1095591
     └─ orderDate: 05/27/2025
     └─ startOfCare: None
     └─ episodeStartDate: 05/13/2025
     └─ episodeEndDate: None
     └─ documentID: None
     └─ mrn: 2170342
     └─ patientName: Aguiar,Joao M
     └─ sentToPhysicianDate: None
     └─ sentToPhysicianStatus: False
     └─ patientId: None
     └─ companyId: None
     └─ bit64Url: None
     └─ documentName: None
[22:04:21] [DOC: 9314061] 📋 [6/6] Processing order submission
[22:04:22] 📊 Retrieved Agency Info
     └─ Start of Care: Not available
     └─ Start of Episode: 05/13/2025
     └─ End of Episode: 07/11/2025
[22:04:22] [DOC: 9314061] 📊 Order Data After Date Processing
     └─ orderNo: 1095591
     └─ orderDate: 05/27/2025
     └─ startOfCare: 05/13/2025
     └─ episodeStartDate: 05/13/2025
     └─ episodeEndDate: 07/11/2025
     └─ documentID: None
     └─ mrn: 2170342
     └─ patientName: Aguiar,Joao M
     └─ sentToPhysicianDate: None
     └─ sentToPhysicianStatus: False
     └─ patientId: None
     └─ companyId: None
     └─ bit64Url: None
     └─ documentName: None
[22:04:22] [DOC: 9314061] 📊 MRN Synchronization
     └─ Patient MRN (extracted): 2170342
     └─ Order MRN (extracted): 2170342
     └─ Final MRN: 2170342
     └─ Source: patient_extracted
     └─ Applied to: Both patient and order
[22:04:22] [DOC: 9314061] 🔄 Preparing order for submission
[22:04:22] [DOC: 9314061] 📊 Order Request Data
     └─ Order No: 1095591
     └─ Patient ID: FALLBACK_PATIENT_9314061
     └─ Company ID: e59b6bf5-1fe9-4d61-9ee0-54041e21e123
     └─ Order Date: 05/27/2025
     └─ Start of Care: 05/13/2025
     └─ Episode Start: 05/13/2025
     └─ Episode End: 07/11/2025
[22:04:23] [DOC: 9314061] ✅ Order already exists in system with ID: ORD15776
[22:04:23] [DOC: 9314061] ℹ️  This indicates the order was processed successfully in a previous run
[22:04:23] [DOC: 9314061] ✅ Order processing completed successfully
[22:04:23] [DOC: 9314061] ✅ Document processing completed successfully!
================================================================================
║                          PROCESSING DOCUMENT 9311183                           ║
================================================================================
[22:04:23] [DOC: 9311183] ℹ️  Facility/Agency: Southcoast VNA – Community Office (Fairhaven) | Received Date: 
[22:04:23] [DOC: 9311183] ⚠️  Agency 'Southcoast VNA – Community Office (Fairhaven)' not found in company mapping
[22:04:23] [DOC: 9311183] 📋 [1/6] Extracting text from PDF
[22:04:25] ℹ️  Document is text-based - using pdfplumber for extraction
[22:04:25] [DOC: 9311183] ✅ Text extracted successfully using pdfplumber
[22:04:25] [DOC: 9311183] ℹ️  Text extraction completed using pdfplumber: 2779 characters
[22:04:25] [DOC: 9311183] ✅ Text extraction completed
[22:04:25] [DOC: 9311183] 📄 NON-FAXED DOCUMENT | Type: ORDER
[22:04:25] [DOC: 9311183] 📊 Document Information
     └─ Faxed: No
     └─ Fax Source: Unknown
     └─ Document Type: ORDER
     └─ Extraction Method: pdfplumber
     └─ Text Length: 2779
[22:04:25] [DOC: 9311183] 📋 [2/6] Extracting patient data using AI
